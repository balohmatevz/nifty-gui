<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title> XML-Validation and Text Rendering with In-Text change of the Textcolor </title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1> Nifty GUI </h1>
        <h2>Your Open Source Java OpenGL GUI</h2>
        <a href="https://github.com/void256/nifty-gui" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          
          <h2>XML-Validation and Text Rendering with In-Text change of the Textcolor</h2>
<p class="meta">18 May 2010</p>

<p><strong>XML-Validation<&#47;strong></p>

<p>The actual parsing of Nifty-XML files is still using a XPP3 based parser and does not require a XML-Schema Definition. The nifty.xsd was only added to validate Nifty XML-Files ... as well as for special support of the jMonkeyEngine3 SDK but that will be explained somewhere else :)</p>

<p>XML-Validation is now build into Nifty but is still an optional step you can use to ensure your Nifty XML is well formed and valid. To perform the actual validation two new methods have been added to the Nifty class:</p>

<p><pre class="brush:java">public void validateXml(final String filename) throws Exception<br />
public void validateXml(final InputStream stream) throws Exception&lt;&#47;pre&gt;<br />
Both methods will simply return or will throw an Exception when any errors have been detected.</p>
<p>To successfully validate the nifty xml file, your xml file should start with the two following lines:</p>
<pre class="brush:xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />
<nifty xmlns="http:&#47;&#47;nifty-gui.sourceforge.net&#47;nifty.xsd" xmlns:xsi="http:&#47;&#47;www.w3.org&#47;2001&#47;XMLSchema-instance" xsi:schemaLocation="http:&#47;&#47;nifty-gui.sourceforge.net&#47;nifty.xsd http:&#47;&#47;nifty-gui.sourceforge.net&#47;nifty.xsd">&lt;&#47;pre&gt;<br />
This way the XML-File is using the correct Nifty Namespace. If you would omit these declarations your XML-File can still be parsed but it will probably not validate against the XSD.</p>
<p>The namespace that has been definied for nifty is actually the URL where you can download the xsd too: <a href="http:&#47;&#47;nifty-gui.sourceforge.net&#47;nifty.xsd">http:&#47;&#47;nifty-gui.sourceforge.net&#47;nifty.xsd&lt;&#47;a&gt;</p>
<p><strong>In-Text changes of Textcolor&lt;&#47;strong&gt;</p>
<p>Up until now Nifty uses the &quot;binary&quot; character value 0x01 directly in the text to indicate that the next three bytes in the text will contain red, green and blue values that represent the color of the text that follows after the color definition.</p>
<p>So you could write a red word, example:</p>
<pre class="brush:xml"><text text="a word in &amp;#01;&amp;#255;&amp;#0;&amp;#0;red"&#47;>&lt;&#47;pre&gt;<br />
This works but is unfortunatly not a valid XML file when trying to validate it with an XML-Schema Definition :)  The problem is, that a valid XML attribute value must not contain values below binary 0x20 (with only a couple of exceptions, like the tab character 0x09). 0x01 is not allowed and will always create a validation error!  So the current solution is to use a new format that doesn&#39;t use 0x01 as a indicator anymore. Instead Nifty will now watch for the special String &quot;#&quot; to mark the beginning of a color definition and &quot;#&quot; as the end. So instead of the xml example given above you can now write:</p>
<pre class="brush:xml"><text text="a word in \#F00#red"&#47;>&lt;&#47;pre&gt;<br />
Which is more readable too!</p>
<p>There is a short Version supported &quot;#F00#&quot; as well as a long version &quot;#FF0000#&quot;. Both are not case sensitive so you could write &quot;#fa9#&quot; too. But remember the trailing # :)</p>
<p>Have fun,<br />
void</p></p>



        </section>

        <aside id="sidebar">
          <a href="https://github.com/void256/nifty-gui/archive/gh-pages.zip" class="button">
            <small>Download</small>
            .zip file
          </a>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title> Dynamically Changing Button Text&#47;Width and the Centerlayout </title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1> Nifty GUI </h1>
        <h2>Your Open Source Java OpenGL GUI</h2>
        <a href="https://github.com/void256/nifty-gui" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          
          <h2>Dynamically Changing Button Text&#47;Width and the Centerlayout</h2>
<p class="meta">21 Feb 2010</p>

<p>Jattra tries to dynamically change button text from within Java and he needs a Button that automatically resizes according to the width of the changed text.</p>

<p>You can follow both threads at the Nifty Help Forum at sf.net:</p>

<p><ul>
<a href="https:&#47;&#47;sourceforge.net&#47;projects&#47;nifty-gui&#47;forums&#47;forum&#47;807893&#47;topic&#47;3546927">Changing Button Text Thread&lt;&#47;a&gt;&lt;&#47;ul&gt;</p>
<ul>
<a href="https:&#47;&#47;sourceforge.net&#47;projects&#47;nifty-gui&#47;forums&#47;forum&#47;807893&#47;topic&#47;3558041">Resizing Buttons to Text Thread&lt;&#47;a&gt;.&lt;&#47;ul&gt;</p>
<p>Read the complete blog post for details.<br />
<a id="more"></a><a id="more-122"></a></p>
<p>Dynamically changing text was easy and has been added to the ButtonControl. You can now simply change text with the following code from java:</p>
<pre lang="java5">screen.findControl(&quot;backButton&quot;, ButtonControl.class).setText(&quot;New Text&quot;);&lt;&#47;pre&gt;</p>
<p>Automatically resizing Buttons was a bit more involving tho.</p>
<p>Nifty actually has build in support for resizing elements according to other elements. But before we can understand what that means we first need to know a bit about the internal workings of a Nifty Button Control.</p>
<p>A Nifty Button consists of a Panel element with childLayout=&quot;center&quot; and one child element which is a Label element that represents the actual button text. So far so good and the standard style set (nifty-style-black) simply adds a fixed width to the button.</p>
<p>So simply using the Button control:</p>
<pre lang="xml"><control name="button" label="Hello World" &#47;>&lt;&#47;pre&gt;</p>
<p>will give you a button with a style specific fixed width.</p>
<p>You can override this fixed width when you use the button control like that:</p>
<pre lang="xml"><control name="button" width="4532px" label="Hello Large Button World" &#47;>&lt;&#47;pre&gt;</p>
<p>This works pretty good if you don&#39;t need to change the button label text. No matter what you do to a button with a fixed width it will always stay at this width (Unless you change the width constraint from code as one of Jattras code examples shows. And although this works it is a bit cumbersome but until now the only way to achieve resizing buttons).</p>
<p>So what should we do to fix this?</p>
<p>Well, actually there is not really much to do. If you ever used a childLayout=&quot;vertical&quot; on something without setting a width but every child in that special element had a fixed size you already have seen that Nifty actually resizes the parent element!</p>
<p>And this is basically default behaviour in Nifty: Whenever Nifty finds an element without a width (or height) constraint it looks at all the child elements and if they all have a fixed width (or height) it automatically resizes the parent element to the size of all child elements.</p>
<p>And this is just what we need here :)</p>
<p>As stated above the Button control uses childLayout=&quot;center&quot; and up until now the center layout did not support this kind of auto-resizing feature. But this has been added to svn a moment ago.</p>
<p>So whenever Nifty encounters an element with childLayout=&quot;center&quot; and the child element has a fixed width then it will resize the element to the child width. And this works for our button control too! And it works even when dynamically changing text from within Java :D</p>
<p>Well, there is one thing to note tho. For backward compatibility the nifty-style-black still sets a fixed width to the button. So to enable the auto resizing you have to override the witdh of the button with an empty String.</p>
<p>Example to enable the auto resizing Button:</p>
<pre lang="xml"><control name="button" width="" label="autoresizing button"&#47;>&lt;&#47;pre&gt;</p>
<p>And that&#39;s it. :)</p>
<p><strong>Note:&lt;&#47;strong&gt;<br />
Another thing to note is, that the change to the center layout logic now requires you to set a width to all elements that use childLayout=&quot;center&quot;. Before this change there was no auto resizing done to elements that use center layout. To prevent the auto resizing that will be used on that elements now you need to specify a width to this elements.</p></p>



        </section>

        <aside id="sidebar">
          <a href="https://github.com/void256/nifty-gui/archive/gh-pages.zip" class="button">
            <small>Download</small>
            .zip file
          </a>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  </body>
</html>
